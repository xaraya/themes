<xar:comment> License: GPL http://www.gnu.org/copyleft/gpl.html </xar:comment>
<script type="text/javascript" src="modules/base/xartemplates/functions.js"></script>
<xar:if condition="xarTplAddStyleLink('sitecontact', 'forms')"></xar:if>
<script type="text/javascript">
<!--
    // Enter name of mandatory fields
    var fieldRequired = Array("useremail", "usermessage","username");
    // Enter field description to appear in the dialog box
    var fieldDescription = Array("Your Email","Your message", "Your Name");
//-->
</script>
<xar:if condition="empty($customtitle)">
    <xar:set name="contacttitle"><xar:mlstring>Contact Form</xar:mlstring></xar:set>
<xar:else />
    <xar:set name="contacttitle">#$customtitle#</xar:set>
</xar:if>
<div class="xar-mod-head">
    <span class="xar-mod-title">
        <xar:mlstring>
            Site Contact
        </xar:mlstring>        
    </span>
</div>
<div id="content">
    <div class="xar-mod-body">
        <xar:if id="title_condition" condition="!empty($message)">
            <div style="clear: both; padding-top: 10px;">
                <span style="float: left; width: 95%; text-align: center; padding:20px;">
                 #$messagetxt#
                </span>
            </div>
        <xar:else />
            <p>
                #$customtext#
            </p>

            <form class="xar-formwidget" action="#xarModUrl('sitecontact', 'user', 'contactus')#" method="post" enctype="application/x-www-form-urlencoded" onsubmit="return formCheck(this, fieldRequired, fieldDescription);">
                <fieldset class="formelements xar-norm">
                    <legend>
                        <strong>
                            #$contacttitle#
                        </strong>
                    </legend>
                <input type="hidden" name="useripaddress" value="#$useripaddress#" />
                <input type="hidden" name="userreferer" value="#$userreferer#" />
                <input type="hidden" name="authid" id="authid" value="#$authid#" />
                <input type="hidden" name="message" id="message" value="1" />
                 <p class="param">
                    <label for="username" class="required">
                        <span class="help" title="#xarML('Enter your name')#">
                            <xar:mlstring>
                                Your Name
                            </xar:mlstring>
                        </span>
                    </label>
                    <xar:if condition = "xarUserIsLoggedIn()">
                        <input type="hidden" name="username" id="username" value="#xarUserGetVar('name')#" />
                        #xarUserGetVar('name')#
                    <xar:else />
                        <input type="text" name="username" id="username" value="" size="25" maxlength="25" />
                    </xar:if>
                </p>    
                <p class="param">
                    <label for="useremail" class="required">
                        <span class="help" title="#xarML('Enter your email')#">
                            <xar:mlstring>
                                Your Email
                            </xar:mlstring>
                        </span>
                    </label>
                    <xar:if condition = "xarUserIsLoggedIn()">
                       <input type="hidden" name="useremail" id="useremail" value="#xarUserGetVar('email')#" />
                           #xarUserGetVar('email')#
                    <xar:else />
                        <input type="text" name="useremail" id="useremail" value="" size="25" maxlength="40" />
                    </xar:if>
                </p>   
                <p class="param">
                    <label for="requesttext" class="required">
                        <span class="help" title="#xarML('Subject')#">
                            <xar:mlstring>
                                Subject
                            </xar:mlstring>
                        </span>
                    </label>
                    <select id="requesttext" name="requesttext">
                    <xar:foreach in="$optionitems" value="$optionrequest" key="$key" >
                        <xar:if condition="$optionrequest[0] eq $requesttext">
                            <option value="#$optionrequest[0]#" selected="selected">#$optionrequest[0]#</option>
                        <xar:else />
                            <option value="#$optionrequest[0]#">#$optionrequest[0]#</option>
                        </xar:if>
                    </xar:foreach>
                    </select>
                </p>   
                <p class="param">
                    <label for="company">
                        <span class="help" title="#xarML('Please enter your organization name.')#">
                            <xar:mlstring>
                                Organization
                            </xar:mlstring>
                        </span>
                    </label>
                    <input type="text" name="company" id="company" size="40" value="" maxlength="128"  />
                </p> 
                <p class="param">
                    <label for="usermessage" class="required">
                        <span class="help" title="#xarML('Type in your message')#">
                            <xar:mlstring>
                                Message
                            </xar:mlstring>
                        </span>
                    </label>
                    <textarea name="usermessage" id="usermessage" rows="5" cols="40"></textarea>
                </p>   

                <xar:if condition="xarModGetVar('sitecontact', 'allowcopy')">
                    <p class="param">
                        <label for="sendcopy">
                            <span class="help" title="#xarML('Would you like to have a copy of the message sent to your email')#">
                                <xar:mlstring>
                                    Copy email to you
                                </xar:mlstring>
                            </span>
                        </label>
                        <input type="checkbox" name="sendcopy" id="sendcopy" value="1" checked="checked" />
                    </p>   
                </xar:if>
                <p class="param">
                    <input type="submit" value="#xarML('Submit')#" />
                    <input type="reset" value="#xarML('Reset')#" />
                </p>
            </fieldset>
        </form>
    </div>
</div>
</xar:if>