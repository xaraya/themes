<div class="xar-mod-head">
    <span class="xar-mod-title">
        <xar:mlstring>Newsgroups</xar:mlstring>
    </span>
</div>

<div class="xar-mod-body">

    <h2>
        <xar:mlstring>Read Message</xar:mlstring>
    </h2>

    <p>#$pager#</p>
    <p>
        <a href="#xarModUrl('newsgroups', 'user', 'group', array('group' => $group))#">
            <xar:ml>
                <xar:mlstring>Back to newsgroup #(1)</xar:mlstring>
                <xar:mlvar>#$group#</xar:mlvar>
            </xar:ml>
        </a>
    </p>

    <xar:if condition="isset($error_message)">
        <p class="xar-error">
            <xar:mlstring>News Server Error:</xar:mlstring>
            <strong>#$error_message#</strong>
        </p>
    <xar:else />
        <xar:sec mask="SendNewsGroups" catch="false">
            <p>
                <a href="#xarModUrl('newsgroups', 'user', 'post', array('group' => $group, 'article' => $articlenum, 'phase' => 'reply'))#"><xar:mlstring>Post a reply</xar:mlstring></a>
            </p>
        </xar:sec>
        <div>
                <xar:mlstring>Subject</xar:mlstring>:&nbsp;&nbsp;<b>#xarVarPrepForDisplay($headers['Subject'])#</b><br />
                <xar:mlstring>From</xar:mlstring>:&nbsp;&nbsp;<b>#xarVarPrepEmailDisplay(xarVarPrepForDisplay($headers['From']))#</b><br />
                <xar:mlstring>Organization</xar:mlstring>:&nbsp;&nbsp;<b><xar:if condition="!empty($headers['Organization'])">#xarVarPrepForDisplay($headers['Organization'])#<xar:else/>-</xar:if></b><br />
                <xar:mlstring>Date</xar:mlstring>:&nbsp;&nbsp;<b>#xarVarPrepForDisplay($headers['Date'])#</b><br />
                <xar:mlstring>Newsgroups</xar:mlstring>:&nbsp;&nbsp;<b>#xarVarPrepForDisplay($headers['Newsgroups'])#</b><br />
                <xar:if condition="isset($headers['References']) and is_array($headers['References'])">
                    <xar:mlstring>References</xar:mlstring>:&nbsp;
                    <xar:foreach in="$headers['References']" key="$key" value="$ref">
                        <xar:if condition="is_numeric($ref)">
                            <a href="#xarModUrl('newsgroups', 'user', 'article', array('group' => $group, 'article' => $ref))#">#$ref#</a>
                        <xar:else/>
                            <a href="#xarModUrl('newsgroups', 'user', 'article', array('group' => $group, 'messageid' => $ref))#">#$key + 1#</a>
                        </xar:if>
                    </xar:foreach><br />
                </xar:if>
                <hr />
                #xarVarPrepEmailDisplay($article)#
            <hr />
        </div>
        <p>#$pager#</p>
    </xar:if>
</div>
