<?xml version="1.0" encoding="utf-8"?>
<xar:template xmlns:xar="http://xaraya.com/2004/blocklayout">

<xar:comment> License: GPL http://www.gnu.org/copyleft/gpl.html </xar:comment>

<div class="xar-mod-head">
	<span class="xar-mod-title"><xar:mlstring>Categories Administration</xar:mlstring></span>
</div>
<div class="xar-mod-body">
    <xar:template type="module" file="admin-menu" />
    <h2><xar:mlstring>View Categories</xar:mlstring></h2>

	<table class="xar-fullwidth"">
		<tr>
		    <th><xar:mlstring>Name</xar:mlstring></th>
		    <th><xar:mlstring>Description</xar:mlstring></th>
		    <th><xar:mlstring>Image</xar:mlstring></th>
		    <th><xar:mlstring>Options</xar:mlstring></th>
		</tr>
		<xar:loop name="$categories">
		    <xar:if condition="(($loop:index + 1) % 2)">
		        <tr>
		            <td class="xar-align-left">
		                #$loop:item.xar_map#
		                #xarVarPrepForDisplay($loop:item.name)#
		            </td>
		            <td>
		            	#xarVarPrepForDisplay($loop:item.description)#
		            </td>
		            <td>
		            	<xar:if condition="empty($loop:item.image)">&#160;<xar:else />#$loop:item.image#</xar:if>
		            </td>
		            <td style="text-align: center;">
		                <xar:sec mask="EditCategories" catch="false">
		                <a href="#xarModURL('categories', 'admin', 'modifycat', array('cid' => $loop:item['cid']))#">
		                    <xar:mlstring>Modify</xar:mlstring>
		                </a>
		                &#160;|&#160;
		                <a href="#xarModURL('categories', 'admin', 'deletecat', array('cid' => $loop:item['cid']))#">
		                    <xar:mlstring>Delete</xar:mlstring>
		                </a>
		                </xar:sec>
		            </td>
		        </tr>
		    <xar:else />
		        <tr>
		            <td style="text-align: left;" class="xar-accent">
		                #$loop:item.xar_map#
		                #xarVarPrepForDisplay($loop:item.name)#
		            </td>
		            <td class="xar-accent">#xarVarPrepForDisplay($loop:item.description)#</td>
		            <td class="xar-accent"><xar:if condition="empty($loop:item.image)">&#160;<xar:else />#$loop:item.image#</xar:if></td>
		            <td class="xar-accent" style="text-align: center;">
		                <xar:sec mask="EditCategories" catch="false">
		                <a href="#xarModURL('categories', 'admin', 'modifycat', array('cid' => $loop:item['cid']))#">
		                    <xar:mlstring>Modify</xar:mlstring>
		                </a>
		                &#160;|&#160;
		                <a href="#xarModURL('categories', 'admin', 'deletecat', array('cid' => $loop:item['cid']))#">
		                    <xar:mlstring>Delete</xar:mlstring>
		                </a>
		                </xar:sec>
		            </td>
		        </tr>
		    </xar:if>
		</xar:loop>
	</table>

	<div class="xar-align-center xar-margin-thickends">
        <xar:for start="$i = 1" test="$i le ($pagertotal - $catsperpage)" iter="$i += $catsperpage">
            <xar:if condition="$i le $pagerstart  AND ($i + $catsperpage) gt $pagerstart">
                #$i#-#$i+$catsperpage-1#
            <xar:else />
                <a href="#xarModURL('categories', 'admin', 'viewcats', array('pagerstart' => $i, 'catsperpage' => $catsperpage))#">
                    #$i#-#$i+$catsperpage-1#
                </a>
            </xar:if>
            <xar:if condition="(($i%100) eq 1) and ($i ne 1)">
                <br />
            <xar:else />
                &#160;|&#160;
            </xar:if>
        </xar:for>
        <xar:if condition="$i eq $pagertotal">
            <xar:if condition="$i le $pagerstart  AND ($i + $catsperpage) gt $pagerstart">
                #$i#
            <xar:else />
                <a href="#xarModURL('categories', 'admin', 'viewcats', array('pagerstart' =&#62; $i, 'catsperpage' =&#62; $catsperpage))#">
                    #$i#
                </a>
            </xar:if>
        </xar:if>
        <xar:if condition="$i lt $pagertotal">
            <xar:if condition="$i le $pagerstart  AND ($i + $catsperpage) gt $pagerstart">
                #$i#-#$pagertotal#
            <xar:else />
                <a href="#xarModURL('categories', 'admin', 'viewcats', array('pagerstart' =&#62; $i, 'catsperpage' =&#62; $catsperpage))#">
                    #$i#-#$pagertotal#
                </a>
            </xar:if>
        </xar:if>

		<p>
			<xar:mlstring>Categories Total:</xar:mlstring>&#160;#$pagertotal#
		</p>

	</div>

	<div class="xar-align-center xar-margin-thickends">
	    <form action="#xarModURL('categories','admin','viewcats')#" method="post">
	        <xar:mlstring>Categories per page:</xar:mlstring>&#160;
	        <input type="text" name="catsperpage" id="catsperpage" value="#$catsperpage#" size="5" />
	        <input type="submit" value="#$reloadlabel#" />
	    </form>
	</div>
</div>


</xar:template>